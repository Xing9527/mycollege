webpackJsonp([23],{HuDy:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("rEPK");var i={data:function(){return{tableData:[],formData:{title:"",img:"",type:null,sort:0,path:"",from:"新闻类"},dialogFormVisible:!1,formLabelWidth:"120px"}},methods:{getData:function(){var t=this;this.$axios.get("getNews",{pn:this.$route.query.pn}).then(function(e){for(var a=0;a<e.data.length;a++)e.data[a].createTime=t.timeTrans(e.data[a].createTime);t.tableData=e.data})},timeTrans:function(t){if(!t)return"-";function e(t){return t>9?t:"0"+t}var a=new Date(t),i=a.getFullYear(),o=e(a.getMonth()+1),l=e(a.getDate()),r=a.getHours();return i+"-"+o+"-"+l+" "+(r>=12?"PM":"AM")+" "+(r=e(r=r>=12?r-12:r))+":"+e(a.getMinutes())},getPageData:function(t){this.$router.push({path:"/admin/news/list",query:{pn:t}}),this.getData()},del:function(t){var e=this;this.$confirm("是否删除这条新闻?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("delNews",{id:t}).then(function(t){e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){e.$router.go(0)},1e3)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},edit:function(t){this.$router.push({path:"/admin/news/update",query:{id:t}})},swiper:function(t,e,a){this.dialogFormVisible=!0,this.formData.title=e,this.formData.path="/news/detail?id="+t,this.formData.img=a},addSwiper:function(){var t=this;this.dialogFormVisible=!1,this.$axios.post("addSwiper",this.formData).then(function(e){t.$message({type:"success",message:"添加成功!"}),setTimeout(function(){1==t.formData.type?t.$router.push("/admin/swiper/home?type=1"):t.$router.push("/admin/swiper/news?type=2")},1e3)})}},created:function(){this.getData()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"title",label:"新闻标题",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"新闻头图",width:"250"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"max-height":"100px"},attrs:{src:t.row.img,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"from",label:"新闻来源",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.edit(e.row._id)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row._id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){t.swiper(e.row._id,e.row.title,e.row.img)}}},[t._v("生成轮播图")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"生成轮播图",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"标题","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.sort,callback:function(e){t.$set(t.formData,"sort",e)},expression:"formData.sort"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"路径","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.formData.path,callback:function(e){t.$set(t.formData,"path",e)},expression:"formData.path"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"type","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择轮播图分类"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},[a("el-option",{attrs:{label:"首页",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"新闻页",value:"2"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSwiper}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:50},on:{"current-change":t.getPageData}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,o,!1,function(t){a("MTe0")},"data-v-2286ea36",null);e.default=l.exports},MTe0:function(t,e){}});
//# sourceMappingURL=23.cd4c399e1774ccee11a3.js.map
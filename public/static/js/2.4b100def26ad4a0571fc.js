webpackJsonp([2],{"Cc/Q":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{formData:{to:"",from:"",content:"",contentTxt:"",imgs:[],time:"",id:""},token:""}},components:{Editor:a("Gcnz").a},methods:{getTxt:function(t){this.formData.contentTxt=t},getToken:function(){var t=this;this.$axios.get("qiniu").then(function(e){t.token=e.data})},success:function(t){var e="http://image.yaojunrong.com/"+t.key;this.formData.imgs.push(e)},upload:function(){var t=this;this.$axios.post("sayAdd",this.formData).then(function(e){e.ret?(t.$message({message:"恭喜你，添加成功!",type:"success"}),setTimeout(function(){t.$router.push("/admin/say/list")},1e3)):t.$message.error("添加出错！！！")})},update:function(){var t=this;this.formData.id=this.$route.query.id,this.$axios.post("sayUpdate",this.formData).then(function(e){e.ret?(t.$message({message:"恭喜你，修改成功!",type:"success"}),setTimeout(function(){t.$router.push("/admin/say/list")},1e3)):t.$message.error("修改出错！！！")})},getOneData:function(){var t=this;this.$axios.get("sayGet",{id:this.$route.query.id}).then(function(e){e.data[0].imgs=[],t.formData=e.data[0]})}},created:function(){this.getToken(),"大声说修改"==this.$route.name&&this.getOneData()},watch:{$route:function(t,e,a){"大声说添加"==t.name&&(this.formData={to:"",from:"",content:"",contentTxt:"",imgs:[],time:""})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("el-form",{ref:"form",attrs:{model:t.formData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"委"}},[a("el-input",{model:{value:t.formData.from,callback:function(e){t.$set(t.formData,"from",e)},expression:"formData.from"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"受"}},[a("el-input",{model:{value:t.formData.to,callback:function(e){t.$set(t.formData,"to",e)},expression:"formData.to"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"内容"}},[a("Editor",{on:{getTxt:t.getTxt},model:{value:t.formData.content,callback:function(e){t.$set(t.formData,"content",e)},expression:"formData.content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"图片(四张)"}},[a("el-upload",{attrs:{action:"https://upload-z1.qiniup.com","list-type":"picture-card","on-success":t.success,data:{token:t.token}}},[a("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"开启时间"}},[a("el-input",{model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1),t._v(" "),a("el-form-item",["大声说添加"==t.$route.name?a("el-button",{on:{click:t.upload}},[t._v("提交")]):t._e(),t._v(" "),"大声说修改"==t.$route.name?a("el-button",{on:{click:t.update}},[t._v("保存修改")]):t._e()],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(o,n,!1,function(t){a("ROqF")},"data-v-aee77b6c",null);e.default=s.exports},ROqF:function(t,e){}});
//# sourceMappingURL=2.4b100def26ad4a0571fc.js.map